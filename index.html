<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Buttons — Web1</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="h-screen flex items-center justify-center bg-gradient-to-br from-sky-400 to-blue-300 text-black">
  <div class="w-full max-w-md p-6 bg-white/60 backdrop-blur-md rounded-2xl shadow-lg text-center">
    <h1 class="text-2xl font-bold mb-4">Retro Buttons</h1>
    <p class="text-sm text-gray-700 mb-6">中央のボタンを押すと Firebase に記録されます</p>

    <div class="flex flex-col gap-4 items-center">
      <button onclick="press(1)"
        class="w-56 py-3 rounded-2xl bg-white shadow-md text-lg font-semibold hover:translate-y-[-3px] transition transform">
        ボタン1
      </button>

      <button onclick="press(2)"
        class="w-56 py-3 rounded-2xl bg-white shadow-md text-lg font-semibold hover:translate-y-[-3px] transition transform">
        ボタン2
      </button>

      <button onclick="press(3)"
        class="w-56 py-3 rounded-2xl bg-white shadow-md text-lg font-semibold hover:translate-y-[-3px] transition transform">
        ボタン3
      </button>
    </div>

    <p id="status" class="mt-6 text-sm text-gray-600"></p>
  </div>

<script>
const FIREBASE_URL = "https://hack-script-e899a-default-rtdb.firebaseio.com";

async function press(n) {
  const payload = {
    button: n,
    ts: Date.now()
  };

  try {
    const res = await fetch(`${FIREBASE_URL}/buttons.json`, {
      method: "POST",
      headers: {"Content-Type": "application/json"},
      body: JSON.stringify(payload)
    });
    if (!res.ok) throw new Error(res.statusText);
    const body = await res.json();
    document.getElementById('status').textContent = `ボタン${n} を送信しました（id: ${body.name}）`;
    // 小さくエフェクト
    flash();
  } catch (e) {
    document.getElementById('status').textContent = `送信失敗: ${e.message}`;
  }
}

function flash() {
  const s = document.getElementById('status');
  s.classList.add('opacity-0');
  setTimeout(()=> s.classList.remove('opacity-0'), 50);
}
</script>
</body>
</html>
